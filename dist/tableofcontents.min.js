!function(){"use strict";window.Toc=class{constructor(t,e,o,n={}){this.contentArea=document.querySelector(t),this.toc=document.querySelector(e),this.contentArea&&this.toc?(this.headingIds=o,this.options=Object.assign({offsetTop:120,duration:500,maxItems:10,classes:{h1:"toc-h1",h2:"toc-h2",h3:"toc-h3",h4:"toc-h4",h5:"toc-h5",h6:"toc-h6"}},n),this.counters={h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},this.idCount=1):console.error("Content area or TOC container not found.")}initialize(){if(!this.contentArea||!this.toc)return void console.error("Initialization failed: contentArea or TOC container not found.");const t=this.contentArea.querySelectorAll("h1, h2, h3, h4, h5, h6"),e=document.createElement("ul");let o=0,n=null;t.forEach((t=>{o++;const n=t.tagName.toLowerCase(),s=this.headingIds[n],i=this.counters[n];s&&s.length>=i?t.id=s[i-1]:t.id=`header${this.idCount}`,this.counters[n]++,this.idCount++;const c=document.createElement("li");c.classList.add(this.options.classes[n]||`toc-${n}`),o>this.options.maxItems&&c.classList.add("hidden");const h=document.createElement("a");h.href=`#${t.id}`,h.textContent=t.textContent,h.addEventListener("click",(e=>{e.preventDefault();const o=document.querySelector(`#${t.id}`).getBoundingClientRect().top+window.pageYOffset-this.options.offsetTop;window.scrollTo({top:o,behavior:"smooth"})})),c.appendChild(h);let l=e;if("h1"!==n){const t="h"+(parseInt(n[1])-1),o=e.querySelectorAll(`.${this.options.classes[t]||`toc-${t}`}`);if(o.length>0){const t=o[o.length-1];let e=t.querySelector("ul");e||(e=document.createElement("ul"),t.appendChild(e)),l=e}}l.appendChild(c)})),o>this.options.maxItems&&(n=document.createElement("button"),n.textContent="全て表示",n.classList.add("show-all"),n.addEventListener("click",(()=>{e.querySelectorAll(".hidden").forEach((t=>t.classList.remove("hidden"))),n.style.display="none"})),this.toc.appendChild(n)),this.toc.appendChild(e);const s=document.createElement("button");s.textContent="目次",s.classList.add("toc-toggle"),s.addEventListener("click",(()=>{this.toc.classList.toggle("active"),n&&(n.style.display=this.toc.classList.contains("active")?"block":"none")})),this.toc.insertBefore(s,this.toc.firstChild),n&&(n.style.display="none")}}}();
//# sourceMappingURL=tableofcontents.min.js.map
