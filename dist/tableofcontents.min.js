!function(){"use strict";window.Toc=class{constructor(t,e,s,o={}){this.contentArea=document.querySelector(t),this.toc=document.querySelector(e),this.contentArea&&this.toc?(this.headingIds=s,this.options=Object.assign({offsetTop:120,duration:500,maxItems:10,classes:{h1:"toc-h1",h2:"toc-h2",h3:"toc-h3",h4:"toc-h4",h5:"toc-h5",h6:"toc-h6"},showAll:{enabled:!1,id:""},toggleButton:{enabled:!1,id:""},includeHeadings:["h1","h2","h3","h4","h5","h6"]},o),this.counters={h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},this.idCount=1):console.error("Content area or TOC container not found.")}sanitizeId(t){return t.replace(/[^a-zA-Z0-9-_]/g,"")}initialize(){if(!this.contentArea||!this.toc)return void console.error("Initialization failed: contentArea or TOC container not found.");const t=this.options.includeHeadings.join(", "),e=this.contentArea.querySelectorAll(t),s=document.createElement("ul");let o=0;e.forEach((t=>{const e=t.tagName.toLowerCase(),n=this.headingIds[e],i=this.counters[e];n&&n.length>=i?t.id=this.sanitizeId(n[i-1]):t.id=`header${this.idCount}`,this.counters[e]++,this.idCount++;const l=document.createElement("li");l.classList.add(this.options.classes[e]||`toc-${e}`),o<this.options.maxItems||!this.options.includeHeadings.includes(e)?l.style.display="list-item":l.style.display="none",o++;const c=document.createElement("p");c.setAttribute("data-target",`#${t.id}`),c.textContent=t.textContent,c.style.cursor="pointer",c.addEventListener("click",(t=>{t.preventDefault();const e=c.getAttribute("data-target").slice(1),s=document.getElementById(e);s&&this.smoothScroll(s)})),l.appendChild(c);let a=s;if("h1"!==e){const t="h"+(parseInt(e[1])-1),o=s.querySelectorAll(`.${this.options.classes[t]||`toc-${t}`}`);if(o.length>0){const t=o[o.length-1];let e=t.querySelector("ul");e||(e=document.createElement("ul"),t.appendChild(e)),a=e}}a.appendChild(l)})),this.toc.appendChild(s);const n=this.options.showAll.enabled?document.getElementById(this.options.showAll.id):null;n&&o>this.options.maxItems&&(n.style.display="block",n.addEventListener("click",(()=>{s.querySelectorAll('li[style="display: none;"]').forEach((t=>t.style.display="list-item")),n.style.display="none"})));const i=this.options.toggleButton.enabled?document.getElementById(this.options.toggleButton.id):null;i&&i.addEventListener("click",(()=>{if("none"!==this.toc.style.display){this.toc.style.display="none",n&&(n.style.display="none");s.querySelectorAll("li").forEach(((t,e)=>{e>=this.options.maxItems&&(t.style.display="none")}))}else{this.toc.style.display="block";s.querySelectorAll("li").forEach(((t,e)=>{e<this.options.maxItems?t.style.display="list-item":t.style.display="none"})),n&&o>this.options.maxItems&&(n.style.display="block")}})),this.toc.style.display="block",n&&o>this.options.maxItems&&(n.style.display="block")}smoothScroll(t){const e=t.getBoundingClientRect().top+window.pageYOffset-this.options.offsetTop,s=window.pageYOffset,o=e-s,n=this.options.duration;let i=null;const l=t=>{null===i&&(i=t);const e=t-i,c=this.ease(e,s,o,n);window.scrollTo(0,c),e<n&&requestAnimationFrame(l)};requestAnimationFrame(l)}ease(t,e,s,o){return(t/=o/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e}}}();
//# sourceMappingURL=tableofcontents.min.js.map
